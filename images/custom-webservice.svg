<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="980" viewBox="0 0 1400 980">
  <defs>
    <style>
      .title { font: 700 18px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; fill:#111; }
      .label { font: 600 13px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; fill:#111; }
      .text  { font: 12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; fill:#111; }
      .small { font: 11px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; fill:#111; }
      .box { fill:#fff; stroke:#333; stroke-width:1.5; rx:10; ry:10; }
      .group { fill:#fafafa; stroke:#666; stroke-width:1.5; rx:14; ry:14; }
      .dashed { stroke-dasharray:6 6; }
      .arrow { stroke:#333; stroke-width:1.6; fill:none; }
      .arrowText { font: 11px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; fill:#333; }
    </style>

    <marker id="arrowHead" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto" markerUnits="strokeWidth">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#333"/>
    </marker>
  </defs>

  <text x="30" y="40" class="title">Golden Webservice + Traits → Kubernetes resources created</text>

  <!-- Group: App Namespace -->
  <rect x="40" y="70" width="880" height="860" class="group"/>
  <text x="60" y="100" class="label">Namespace: &lt;app-namespace&gt;</text>

  <!-- Group: Envoy Gateway Namespace -->
  <rect x="970" y="180" width="390" height="280" class="group"/>
  <text x="990" y="210" class="label">Namespace: envoy-gateway-system</text>

  <!-- Boxes (App Namespace) -->
  <!-- OAM Layer -->
  <rect x="90" y="130" width="260" height="70" class="box"/>
  <text x="110" y="160" class="label">OAM Application</text>
  <text x="110" y="182" class="text">demo</text>

  <rect x="420" y="130" width="280" height="70" class="box"/>
  <text x="440" y="160" class="label">Component</text>
  <text x="440" y="182" class="text">golden-webservice / frontend</text>

  <!-- Core outputs -->
  <rect x="420" y="260" width="280" height="70" class="box"/>
  <text x="440" y="290" class="label">Deployment</text>
  <text x="440" y="312" class="text">frontend</text>

  <rect x="90" y="260" width="260" height="70" class="box"/>
  <text x="110" y="290" class="label">Service</text>
  <text x="110" y="312" class="text">frontend</text>

  <!-- Trait boxes -->
  <rect x="90" y="370" width="260" height="70" class="box"/>
  <text x="110" y="400" class="label">Trait</text>
  <text x="110" y="422" class="text">standard-topology</text>

  <rect x="420" y="370" width="280" height="70" class="box"/>
  <text x="440" y="400" class="label">Trait</text>
  <text x="440" y="422" class="text">default-hpa</text>

  <rect x="740" y="370" width="150" height="70" class="box"/>
  <text x="760" y="400" class="label">Trait</text>
  <text x="760" y="422" class="text">envoy-http-route</text>

  <!-- HPA -->
  <rect x="420" y="500" width="280" height="70" class="box"/>
  <text x="440" y="530" class="label">HorizontalPodAutoscaler</text>
  <text x="440" y="552" class="text">frontend-default</text>

  <!-- HTTPRoute -->
  <rect x="740" y="500" width="150" height="70" class="box"/>
  <text x="760" y="530" class="label">HTTPRoute</text>
  <text x="760" y="552" class="text">frontend</text>

  <!-- Deployment-owned -->
  <rect x="420" y="630" width="280" height="70" class="box"/>
  <text x="440" y="660" class="label">ReplicaSet</text>
  <text x="440" y="682" class="text">(managed by Deployment)</text>

  <rect x="420" y="760" width="280" height="70" class="box"/>
  <text x="440" y="790" class="label">Pods</text>
  <text x="440" y="812" class="text">(selected by Service)</text>

  <!-- Side notes for patches -->
  <rect x="90" y="760" width="260" height="110" class="box"/>
  <text x="110" y="790" class="label">PodSpec patch</text>
  <text x="110" y="812" class="small">topologySpreadConstraints</text>
  <text x="110" y="832" class="small">• kubernetes.io/hostname (skew=1)</text>
  <text x="110" y="852" class="small">• topology.kubernetes.io/zone (skew=1)</text>

  <rect x="740" y="630" width="150" height="110" class="box"/>
  <text x="760" y="660" class="label">Container config</text>
  <text x="760" y="682" class="small">readinessProbe: /healthz</text>
  <text x="760" y="702" class="small">livenessProbe: /healthz</text>

  <!-- Envoy Gateway box -->
  <rect x="1010" y="250" width="310" height="70" class="box"/>
  <text x="1030" y="280" class="label">Gateway</text>
  <text x="1030" y="302" class="text">eg-gateway</text>

  <!-- Arrows -->
  <!-- Application -> Component -->
  <path d="M 350 165 L 420 165" class="arrow" marker-end="url(#arrowHead)"/>

  <!-- Component -> Deployment -->
  <path d="M 560 200 L 560 260" class="arrow" marker-end="url(#arrowHead)"/>

  <!-- Component -> Service -->
  <path d="M 470 200 C 360 230, 300 240, 220 260" class="arrow" marker-end="url(#arrowHead)"/>

  <!-- Component -> Traits -->
  <path d="M 490 200 C 410 270, 280 330, 220 370" class="arrow" marker-end="url(#arrowHead)"/>
  <path d="M 560 200 L 560 370" class="arrow" marker-end="url(#arrowHead)"/>
  <path d="M 650 200 C 720 260, 790 330, 815 370" class="arrow" marker-end="url(#arrowHead)"/>

  <!-- standard-topology -> Deployment (patches it) -->
  <path d="M 350 405 L 420 325" class="arrow" marker-end="url(#arrowHead)"/>

  <!-- default-hpa -> HPA -->
  <path d="M 560 440 L 560 500" class="arrow" marker-end="url(#arrowHead)"/>

  <!-- envoy-http-route -> HTTPRoute -->
  <path d="M 815 440 L 815 500" class="arrow" marker-end="url(#arrowHead)"/>

  <!-- Deployment -> ReplicaSet -> Pods -->
  <path d="M 560 330 L 560 630" class="arrow" marker-end="url(#arrowHead)"/>
  <path d="M 560 700 L 560 760" class="arrow" marker-end="url(#arrowHead)"/>

  <!-- Service -> Pods (selector) -->
  <path d="M 220 330 C 260 520, 320 700, 420 795" class="arrow" marker-end="url(#arrowHead)"/>
  <text x="240" y="520" class="arrowText">selector</text>

  <!-- Pods dashed -> topology patch note -->
  <path d="M 420 805 L 350 805" class="arrow dashed" marker-end="url(#arrowHead)"/>

  <!-- Pods dashed -> probes note -->
  <path d="M 700 785 C 740 760, 780 730, 815 700" class="arrow dashed" marker-end="url(#arrowHead)"/>

  <!-- Gateway -> HTTPRoute -->
  <path d="M 1010 285 C 920 300, 860 390, 835 500" class="arrow" marker-end="url(#arrowHead)"/>

  <!-- HTTPRoute -> Service (backendRefs) -->
  <path d="M 740 535 C 560 560, 380 520, 290 330" class="arrow" marker-end="url(#arrowHead)"/>
  <text x="560" y="575" class="arrowText">backendRefs</text>

  <!-- HPA -> Deployment (scaleTargetRef) -->
  <path d="M 560 500 C 640 440, 660 380, 620 330" class="arrow" marker-end="url(#arrowHead)"/>
  <text x="640" y="450" class="arrowText">scaleTargetRef</text>
</svg>